(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"04e1":function(e,t,i){"use strict";i("a2c8")},"16c0":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"homeContainer",staticClass:"home-container",on:{wheel:e.handleWheel}},[i("ul",{ref:"container",staticClass:"carousel-container",style:{marginTop:e.marginTop},on:{transitionend:e.handleTransitionEnd}},e._l(e.data,(function(e){return i("li",{key:e.id,staticClass:"carousel-item"},[i("CarouselItem",{attrs:{carousel:e}})],1)})),0),e.currentIndex>0?i("div",{staticClass:"icon icon-up",on:{click:function(t){e.currentIndex--}}},[i("Icon",{attrs:{className:"upArrow"}})],1):e._e(),e.currentIndex<e.data.length-1?i("div",{staticClass:"icon icon-down",on:{click:function(t){e.currentIndex++}}},[i("Icon",{attrs:{className:"downArrow"}})],1):e._e(),i("ul",{staticClass:"indicators"},e._l(e.data,(function(t,s){return i("li",{key:t.id,class:{active:e.currentIndex===s},on:{click:function(t){e.currentIndex=s}}})})),0)])},n=[],o=(i("c8ac"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"homeContainer",staticClass:"carousel-item-container",on:{mousemove:e.handleMousemove,mouseleave:e.center}},[i("div",{ref:"container",staticClass:"carousel-img"},[i("ImageLoader",{attrs:{imgSrc:e.carousel.bigImg,placeholder:e.carousel.midImg,duration:2e3},on:{load:e.handleLoad}})],1),i("h1",{ref:"title",class:{showWords:e.showWords}},[e._v(e._s(e.carousel.title))]),i("h2",{ref:"description",class:{showWords:e.showWords}},[e._v(e._s(e.carousel.description))])])}),a=[],r=i("f76b"),c={props:["carousel"],components:{ImageLoader:r["a"]},data(){return{showWords:!1,titleWidth:0,descpWidth:0,isLoading:!0,mouseX:0,mouseY:0}},methods:{handleLoad(){this.isLoading=!1,this.showMessage()},showMessage(){this.$refs.title.style.opacity=1,this.$refs.title.style.width="0px",this.$refs.description.style.opacity=1,this.$refs.description.style.width="0px",this.$refs.title.clientWidth,this.$refs.title.style.width=this.titleWidth+"px",this.$refs.description.style.width=this.descpWidth+"px"},center(){const e=this.$refs.homeContainer,t=e.getBoundingClientRect(),i=t.left+t.width/2,s=t.top+t.height/2;this.mouseX=i,this.mouseY=s,this.setPosition()},handleMousemove(e){this.mouseX=e.clientX,this.mouseY=e.clientY,this.setPosition()},setPosition(){const e=this.$refs.homeContainer,t=this.$refs.container,i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),n=s.left,o=s.width,a=e.clientWidth,r=i.width,c=s.top,d=s.height,l=e.clientHeight,h=i.height,u=-(this.mouseX-n)/o*(r-a),g=-(this.mouseY-c)/d*(h-l);t.style.transform=`translate(${u}px,${g}px)`}},mounted(){console.log("mounted"),this.titleWidth=this.$refs.title.clientWidth,this.descpWidth=this.$refs.description.clientWidth,this.center(),window.addEventListener("resize",this.center)},updated(){},destroyed(){window.removeEventListener("resize",this.center)}},d=c,l=(i("7fdc"),i("2877")),h=Object(l["a"])(d,o,a,!1,null,"2c5481e7",null),u=h.exports,g=i("cdae"),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("img",{staticClass:"loading-container",attrs:{src:e.loadingUrl}})},p=[],f=i("4045"),w=i.n(f),v={data(){return{loadingUrl:w.a}}},y=v,x=(i("9455"),Object(l["a"])(y,m,p,!1,null,"0b1ab134",null)),C=x.exports,$=i("5880"),I={components:{CarouselItem:u,Icon:g["a"],Loading:C},directives:{},data(){return{currentIndex:0,containerHeight:0,isSwitching:!1,count:0}},computed:{marginTop(){return-this.currentIndex*this.containerHeight+"px"},...Object($["mapState"])("banner",["isLoading","data"])},methods:{handleClick(){this.count++,console.log("count: "+this.count)},handleWheel(e){this.isSwitching||(e.deltaY<-5&&this.currentIndex>0&&(this.isSwitching=!0,this.currentIndex--),e.deltaY>5&&this.currentIndex<this.data.length-1&&(this.isSwitching=!0,this.currentIndex++))},handleTransitionEnd(e){"margin-top"===e.propertyName&&(console.log(" 页面切换结束 transitionend"),this.isSwitching=!1)},handleResize(){this.containerHeight=this.$refs.container.clientHeight}},beforeCreate(){},async created(){store.dispatch("banner/getBanners")},beforeMount(){},mounted(){this.containerHeight=this.$refs.container.clientHeight,window.addEventListener("resize",this.handleResize)},updated(){console.log("updated")},destroyed(){console.log("destroyed"),window.removeEventListener("resize",this.handleResize)}},W=I,L=(i("8f8d"),Object(l["a"])(W,s,n,!1,null,"a902d12e",null));t["default"]=L.exports},"1e03":function(e,t,i){},"7fdc":function(e,t,i){"use strict";i("a209")},8861:function(e,t,i){},"8f8d":function(e,t,i){"use strict";i("1e03")},9455:function(e,t,i){"use strict";i("8861")},a209:function(e,t,i){},a2c8:function(e,t,i){},f76b:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"imageLoader-container",attrs:{ostyle:e.imageLoaderStyle}},[e.displayFlag?i("img",{staticClass:"mask ",attrs:{src:e.placeholder,oclass:{classOpacity:e.flag},oheight:e.imgHeight,owidth:e.imgWidth,ostyle:e.imgStyle},on:{otransitionend:e.removeSelf}}):e._e(),i("img",{class:{classOpacity:!e.flag},style:e.imgStyle,attrs:{src:e.imgSrc,oheight:e.imgHeight,owidth:e.imgWidth},on:{load:e.loadHandler}})])},n=[],o={props:{imgSrc:{type:String,required:!0},placeholder:{type:String,required:!0},duration:{type:Number,default:500}},data(){return{imgHeight:300,imgWidth:500,flag:!1,displayFlag:!0}},computed:{imgStyle(){return{transition:`opacity  ${this.duration}ms`}},imageLoaderStyle(){return{width:this.imgWidth+"px",height:this.imgHeight+"px"}}},methods:{loadHandler(){console.log(" 原图加载完成 loadHandler called "),this.flag=!0,setTimeout(()=>{this.removeSelf(),this.$emit("load")},this.duration)},removeSelf(){this.displayFlag=!1}}},a=o,r=(i("04e1"),i("2877")),c=Object(r["a"])(a,s,n,!1,null,"ddb62414",null);t["a"]=c.exports}}]);